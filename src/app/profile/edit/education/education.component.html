<div class="container" [formGroup]="educationForm">
  <mat-card>
    <mat-card-title>Education</mat-card-title>
    <mat-card-content>
      <mat-accordion multi formArrayName="educations">
        <mat-expansion-panel
          *ngFor="let education of educationsArray.controls; let i = index"
          [formGroupName]="i"
          style="padding: 10px"
        >
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{ education.get("year").value || "Year" }} -
              {{ education.get("institution").value || "Institution" }} -
              {{ education.get("course").value || "Course" }}
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutGap="10px">
            <mat-form-field fxFlex="100" fxFlex.gt-sm="20" style="width: 100%">
              <mat-label>Year</mat-label>
              <input matInput formControlName="year" />
            </mat-form-field>

            <mat-form-field fxFlex="100" fxFlex.gt-sm="40" style="width: 100%">
              <mat-label>Course</mat-label>
              <input matInput formControlName="course" />
            </mat-form-field>

            <mat-form-field fxFlex="100" fxFlex.gt-sm="40" style="width: 100%">
              <mat-label>Institution</mat-label>
              <input matInput formControlName="institution" />
              <button
                type="button"
                mat-icon-button
                matSuffix
                color="warn"
                (click)="remove(i)"
              >
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-form-field>
          </div>
        </mat-expansion-panel>
        <mat-expansion-panel style="padding: 10px">
          <mat-expansion-panel-header>
            <mat-panel-title> Add more ... </mat-panel-title>
          </mat-expansion-panel-header>

          <div
            fxLayout="column"
            fxLayout.gt-sm="row"
            fxLayoutGap="10px"
            [formGroup]="educationInputForm"
          >
            <mat-form-field
              appearance="fill"
              fxFlex="100"
              fxFlex.gt-sm="20"
              style="width: 100%"
            >
              <mat-label>Year</mat-label>
              <input matInput formControlName="newYear" />
            </mat-form-field>
            <mat-form-field
              appearance="fill"
              fxFlex="100"
              fxFlex.gt-sm="40"
              style="width: 100%"
            >
              <mat-label>Course</mat-label>
              <input matInput formControlName="newCourse" />
            </mat-form-field>
            <mat-form-field
              appearance="fill"
              fxFlex="100"
              fxFlex.gt-sm="40"
              style="width: 100%"
            >
              <mat-label>Institution</mat-label>
              <input matInput formControlName="newInstitution" />

              <button
                type="button"
                mat-icon-button
                matSuffix
                color="warn"
                (click)="clearAll()"
              >
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-form-field>
          </div>
          <div
            fxLayout="row"
            fxLayoutAlign="center center"
            fxLayoutAlign.gt-sm="end center"
          >
            <button
              type="button"
              mat-raised-button
              color="accent"
              [disabled]="!isAddButtonActive"
              (click)="addNew()"
            >
              Add
            </button>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
  </mat-card>
</div>
